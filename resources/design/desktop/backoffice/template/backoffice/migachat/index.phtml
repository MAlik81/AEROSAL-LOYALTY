<form ng-submit="saveLicense()" class="form-horizontal">
	<sb-section title="'<?php echo addslashes(p__("Migachat", "Your Module License Key")); ?>'" button="button">
		<div class="alert alert-info" ng-hide="!license.info_message">{{ license.info_message }}</div>
		<div class="alert alert-success" ng-hide="!license.success_message">{{ license.success_message }}</div>
		<div class="form-group">
			<div class="col-md-6">
				<label for="key">
					<?php echo addslashes(p__("Migachat", "Your Module License Key")); ?>
				</label>
				<input type="text" id="key" ng-model="license.key" class="form-control"
					placeholder="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX" />
			</div>

		</div>

		<div class="form-group">

			<div class="col-md-12">

				<button type="submit" class="btn btn-primary left">
					<?php echo p__("Migachat", "Save"); ?>
				</button>

				<sb-loader is_visible="form_loader_is_visible" type="'inner_content'" size="'small'" animation="'no'"
					class="form_loader"></sb-loader>

				<div class="clear"></div>

			</div>

		</div>

	</sb-section>

</form>
<form ng-submit="saveHelp()" class="form-horizontal">

	<sb-section title="'<?php echo addslashes(p__("Migachat", "Your Module Help URL")); ?>'" button="button">

		<div class="alert alert-info" ng-hide="!help.info_message">{{ help.info_message }}</div>

		<div class="alert alert-success" ng-hide="!help.success_message">{{ help.success_message }}</div>

		<div class="form-group">

			<div class="col-md-6">

				<label for="key">
					<?php echo addslashes(p__("Migachat", "Your Module Help URL")); ?>
				</label>

				<input type="text" id="help_url" ng-model="help.help_url" class="form-control"
					placeholder="http:// or https://" />

			</div>

		</div>

		<div class="form-group">

			<div class="col-md-12">

				<button type="submit" class="btn btn-primary left">
					<?php echo p__("Migachat", "Save"); ?>
				</button>

				<sb-loader is_visible="form_loader_help_is_visible" type="'inner_content'" size="'small'"
					animation="'no'" class="form_loader"></sb-loader>

				<div class="clear"></div>

			</div>

		</div>

	</sb-section>

</form>



<form ng-submit="saveBlacklistedNumbers()" class="form-horizontal">

	<sb-section title="'<?php echo addslashes(p__("Migachat", "Blacklisted Numbers")); ?>'"
		button="button">
		<div class="alert alert-info"><?php echo p__("Migachat", "Add comma separated mobile number with complete formatting and without any spaces."); ?></div>
		<div class="form-group">

			<div class="col-md-3">

				<label for="blacklisted">
					<?php echo addslashes(p__("Migachat", "Add blacklisted mobile numbers")); ?>
				</label>

				<textarea id="blacklisted " name="blacklisted.blacklisted_numbers " class="form-control"
					ng-model="blacklisted.blacklisted_numbers " placeholder="">
				</textarea>

			</div>

		</div>

		<div class="form-group">

			<div class="col-md-12">

				<button type="submit" class="btn btn-primary left">
					<?php echo p__("Migachat", "Save"); ?>
				</button>

				<sb-loader is_visible="form_loader_blacklisted_numbers_is_visible" type="'inner_content'" size="'small'"
					animation="'no'" class="form_loader"></sb-loader>

				<div class="clear"></div>

			</div>

		</div>

	</sb-section>

</form>

<form ng-submit="addLimitOffNumber()" class="form-horizontal">

        <sb-section title="'<?php echo addslashes(p__("Migachat", "Limit-off allowlist")); ?>'"
                button="button">
                <div class="alert alert-info"><?php echo p__("Migachat", "Numbers in this list bypass per-chat token limits. Use it carefully."); ?></div>
                <div class="form-group">

                        <div class="col-md-3">

                                <label for="limit_off_mobile">
                                        <?php echo addslashes(p__("Migachat", "Add allowlisted mobile number")); ?>
                                </label>

                                <input id="limit_off_mobile" name="limitoff.mobile" class="form-control"
                                        type="text" ng-model="limitOff.mobile" placeholder="+391234567890">

                        </div>

                        <div class="col-md-9" ng-if="limitOffNumbers.length">
                                <label><?php echo addslashes(p__("Migachat", "Current allowlisted numbers")); ?></label>
                                <ul class="list-unstyled button-list">
                                        <li ng-repeat="number in limitOffNumbers track by $index">
                                                <span class="label label-primary">{{number}}</span>
                                                <button type="button" class="btn btn-link"
                                                        ng-click="deleteLimitOffNumber(number)">
                                                        <?php echo p__("Migachat", "Remove"); ?>
                                                </button>
                                        </li>
                                </ul>
                        </div>

                </div>

                <div class="form-group">

                        <div class="col-md-12">

                                <button type="submit" class="btn btn-primary left">
                                        <?php echo p__("Migachat", "Add"); ?>
                                </button>

                                <sb-loader is_visible="form_loader_limit_off_is_visible" type="'inner_content'" size="'small'"
                                        animation="'no'" class="form_loader"></sb-loader>

                                <div class="clear"></div>

                        </div>

                </div>

        </sb-section>

</form>

<form ng-submit="saveHistoryLimit()" class="form-horizontal">

	<sb-section title="'<?php echo addslashes(p__("Migachat", "Duration to maintain history of chats")); ?>'"
		button="button">

		<div class="form-group">

			<div class="col-md-3">

				<label for="history_duration">
					<?php echo addslashes(p__("Migachat", "Select Duration")); ?>
				</label>

				<select id="history_duration" name="history.history_duration" class="form-control"
					ng-model="history.history_duration">

					<option value="0">
						<?php echo p__("Migachat", "Life Time"); ?>
					</option>

					<option value="3">
						<?php echo p__("Migachat", "3 Months"); ?>
					</option>
					<option value="6">
						<?php echo p__("Migachat", "6 Months"); ?>
					</option>
					<option value="9">
						<?php echo p__("Migachat", "9 Months"); ?>
					</option>
					<option value="12">
						<?php echo p__("Migachat", "12 Months"); ?>
					</option>

				</select>

			</div>

		</div>

		<div class="form-group">

			<div class="col-md-12">

				<button type="submit" class="btn btn-primary left">
					<?php echo p__("Migachat", "Save"); ?>
				</button>

				<sb-loader is_visible="form_loader_history_limit_is_visible" type="'inner_content'" size="'small'"
					animation="'no'" class="form_loader"></sb-loader>

				<div class="clear"></div>

			</div>

		</div>

	</sb-section>

</form>

<form ng-submit="saveGPTModelsTokens()" class="form-horizontal">

	<sb-section title="'<?php echo __title(p__("Migachat", "OpenAI models tokens limit")); ?>'" button="button">

		<table class="table">

			<thead>

				<tr>

					<th><strong>
							<?php echo p__("Migachat", 'Model Name'); ?>
						</strong></th>

					<th><strong>
							<?php echo p__("Migachat", 'Tokens Limit'); ?>
						</strong></th>
				</tr>

			</thead>
			<tbody>
				<tr class="white-line" ng-repeat="gpt_model in gpt_models">
					<th><strong>{{gpt_model.id}}</strong></th>
					<td> <input type="number" min="0" required id="gpt_model_limit_{{gpt_model.id}}"
							ng-model="model_limit[gpt_model.id]" class="form-control" placeholder="0" /> </td>
				</tr>
			</tbody>
			<tfoot>
				<tr>
					<td colspan="2">

						<button type="submit" class="btn btn-primary left">
							<?php echo p__("Migachat", "Save"); ?>
						</button>

						<sb-loader is_visible="form_loader_history_limit_is_visible" type="'inner_content'"
							size="'small'" animation="'no'" class="form_loader"></sb-loader>

						<div class="clear">
							
						</div>
					</td>
				</tr>
			</tfoot>
		</table>
	</sb-section>
</form>



<sb-section ng-show="app_licenses.length" title="'<?php echo __title("App Licenses"); ?>'" button="button">

	<table class="table">

		<thead>

			<tr>

				<th><strong>
						<?php echo p__("Migachat", 'App Id'); ?>
					</strong></th>

				<th><strong>
						<?php echo p__("Migachat", 'App Name'); ?>
					</strong></th>

				<th><strong>
						<?php echo p__("Migachat", 'Activated'); ?>
					</strong></th>

				<th><strong>
						<?php echo p__("Migachat", 'Expiry'); ?>
					</strong></th>

				<th><strong>
						<?php echo p__("Migachat", 'Status'); ?>
					</strong></th>

			</tr>

		</thead>

		<tbody>

			<tr class="white-line" ng-repeat="app_license in app_licenses">

				<td>{{ app_license.app_id }}</td>

				<td>{{ app_license.app_name }}</td>

				<td>{{ app_license.activated }}</td>

				<td>{{ app_license.expiry }}</td>

				<td><span class="label label-sm"
						ng-class="{'label-success': app_license.status == 'Active', 'label-info': app_license.status == 'Expired'}">
						{{ app_license.status }} </span></td>

			</tr>

		</tbody>

	</table>

</sb-section>


<sb-section title="'<?php echo addslashes(p__("Migachat", "CRON Job Information")); ?>'" button="button">

	<!-- <div class="alert alert-success" ng-hide="!cron.url"><a href="{{ cron.url }}" target="_blank">{{ cron.url }}</a> -->
	<!-- </div> -->

	<div class="alert alert-info" ng-hide="!cron.info_message">{{ cron.info_message }}</div>

	<div class="alert alert-info" ng-hide="!cron.cron_message">{{ cron.cron_message }}</div>

	<div class="col-md-12">

		<table class="table table-striped">

			<thead>

				<tr>

					<th>
						<h3>
							<?php echo addslashes(p__("Migachat", "CRON Job Log")); ?>
							<h3>
					</th>

				</tr>

			</thead>

			<tbody>

				<tr>

					<th>
						<?php echo addslashes(p__("Migachat", "Last Error")); ?>
					</th>

					<td>{{ cron.last_error }}</td>

				</tr>

				<tr>

					<th>
						<?php echo addslashes(p__("Migachat", "Last Error Date")); ?>
					</th>

					<td>{{ cron.last_error_date }}</td>

				</tr>

				<tr>

					<th>
						<?php echo addslashes(p__("Migachat", "Last Trigger")); ?>
					</th>

					<td>{{ cron.last_trigger }}</td>

				</tr>

				<tr>

					<th>
						<?php echo addslashes(p__("Migachat", "Last Success")); ?>
					</th>

					<td>{{ cron.last_success }}</td>

				</tr>

				<tr>

					<th>
						<?php echo addslashes(p__("Migachat", "Last Fail")); ?>
					</th>

					<td>{{ cron.last_fail }}</td>

				</tr>

				<tr>

					<th>
						<?php echo addslashes(p__("Migachat", "Created At")); ?>
					</th>

					<td>{{ cron.created_at }}</td>

				</tr>

				<tr>

					<th>
						<?php echo addslashes(p__("Migachat", "Updated At")); ?>
					</th>

					<td>{{ cron.updated_at }}</td>

				</tr>

			</tbody>

		</table>

	</div>

</sb-section>

<div class="clear"></div>