<ion-view sb-page-background class="migachat-view">

  <ion-nav-title>{{page_title}}</ion-nav-title>

  <ion-nav-buttons side="secondary">
    <button ng-click="clearHistory()"
            class="button button-clear header-item">
            <i class="icon ion-trash-a" style=""></i>
    </button>
</ion-nav-buttons>
  <ion-content on-scroll="handleScroll()" ng-mousedown="disableScroll()" ng-mouseup="enableScroll()"
    ng-class="{'disable-scroll': !allowScroll}">
    <div class="loader" ng-show="is_loading">
      <ion-spinner class="spinner-custom"></ion-spinner>
    </div>
    <div class="chat-container" id="chatContainer">
      <ion-list>
        <div ng-repeat="message in messages" class="chat-message"
          ng-class="{'user-message': message.sender === 'user', 'bot-message': message.sender === 'bot'}">
          <img ng-if="message.sender === 'bot'"
            ng-src="{{logo2}}" style="
              float: left;
              background-color: #c6d2d9;
              
              width: 35px;
              height: 35px;
              border-radius: 50%;
            " />
          <div class="message-content">
            <i class="icon ion-clipboard" ng-if="message.sender === 'bot'" ng-click="copyToClipboard(message.content)" style="float: right;font-size: 25px;font-weight: bolder;"></i>
            <div  ng-bind-html="message.content"> {{ message.content }}</div>
          </div>
          <img ng-if="message.sender === 'user'"
            src="https://www.citypng.com/public/uploads/preview/white-user-member-guest-icon-png-image-31634946729lnhivlto5f.png"
            style="
              float: left;
              background-color: #263238;
              padding: 5px;
              width: 35px;
              height: 35px;
              border-radius: 50%;
            " />
        </div>
        <div class="bot-message" ng-show="responce_o.is_loading">
          <div class="message-content">
            <img
              src="https://retail.curator.interworks.com/plugins/interworks/content/assets/images/dots-loading-animation.gif"
              height="70px" />
          </div>
        </div>
      </ion-list>
    </div>
    <!-- <div class="nav-bar-block">
      <ion-header-bar class="bar-custom bar bar-header disable-user-behavior migadoorunlock-view" align-title="center">
        <button ng-click="goto('home')" class="button back-button buttons button-clear header-item">
          <i class="icon ion-ios-arrow-back"></i>
          <span class="default-title ng-binding">{{ ::"Back" | translate:"Migadoorunlock"}}</span>
          <span class="back-text" style="transform: translate3d(0px, 0px, 0px);">
        </button>
        <div class="title title-center header-item" id="migadoorunlock-title" ng-style="title_styles">
          <span class="nav-bar-title ng-binding">{{ ::"Migadoorunlock" | translate:"Migadoorunlock"}}</span>
        </div>
        <div class="buttons buttons-right header-item">
          <span class="right-buttons">
            <a class="button button-clear button-icon icon ion-home" ng-click="goto('home')"></a>
          </span>
        </div>
      </ion-header-bar>
    </div> -->

      <style>
      .migachat-view .chat-container {
        background-color: #fff;
        padding: 10px;
        padding-bottom: 70px;
        margin-top: 50px;
      }

      .migachat-view .chat-message {
        padding: 5px;
        margin-bottom: 10px;
        display: flex;
        justify-content: flex-start;
      }

      .migachat-view .chat-message.user-message {
        justify-content: flex-end;
      }

      .migachat-view .chat-message .message-content {
        padding: 10px;
        border-radius: 0 20px 20px;
        word-break: break-word;
        max-width: 80%;
        min-width: 20%;
        background-color: #ecf9f1;
        color: #000;
      }

      .migachat-view .chat-message.user-message .message-content {
        background-color: #12191d;
        color: #fff;
        border-radius: 20px 0px 20px 20px;
      }

      .migachat-view .chat-message .message-content.user-message {
        background-color: #fff;
        color: #000;
      }

      .migachat-view .chat-message .message-content.user-message.user-message {
        background-color: #dcf8c6;
        color: #000;
      }
      /* Update the position and styling for the input container */
      .migachat-view .input-container {
        position: fixed;
        bottom: 0px;
        left: 0;
        right: 0;
        background-color: #fff;
        height: 65px;
      }

      .migachat-view .input-container textarea {
        border: 1px solid #263238;
        width: 85%;
        float: left;
        padding: 10px;
        height: 42px;
      }

      .migachat-view .input-container .send-button {
        border: none;
        width: 15%;
        float: right;
        padding: 0px !important;
        min-width: auto;
        min-height: 40px;
        font-size: 28px;
        line-height: inherit;
      }
      .chat_image {
        width: 100%;
        padding: 3%;
      }
    </style>
  </ion-content>
  <div class="input-container">
    <textarea ng-model="message.input" placeholder="{{place_holder}}"></textarea>

    <button class="button button-calm send-button" ng-click="sendMessage()">
      <i class="icon ion-android-send"></i>
    </button>
    <p style="color: #000;background-color: rgba(255, 255, 255, 0.5);">1.3.31 </p>
  </div>
</ion-view>

